<pre id='vimCodeElement'>
<span class="PreProc">@startuml</span>
<span class="PreProc">!include </span><span class="Constant">&lt;awslib/AWSCommon&gt;</span>
<span class="PreProc">!include </span><span class="Constant">&lt;awslib/InternetOfThings/IoTRule&gt;</span>
<span class="PreProc">!include </span><span class="Constant">&lt;awslib/Analytics/KinesisDataStreams&gt;</span>
<span class="PreProc">!include </span><span class="Constant">&lt;awslib/ApplicationIntegration/SimpleQueueService&gt;</span>

<span class="Statement">left</span> <span class="Statement">to</span> <span class="Statement">right</span> direction

<span class="Type">agent</span> <span class="Constant">&quot;Published Event&quot;</span> <span class="Statement">as</span> event #fff

IoTRule<span class="Type">(iotRule, &quot;Action Error Rule&quot;, &quot;error if Kinesis fails&quot;)</span>
KinesisDataStreams<span class="Type">(eventStream, &quot;IoT Events&quot;, &quot;2 shards&quot;)</span>
SimpleQueueService<span class="Type">(errorQueue, &quot;Rule Error Queue&quot;, &quot;failed Rule actions&quot;)</span>

event <span class="Identifier">--&gt;</span> iotRule : <span class="Comment">JSON message</span>
iotRule <span class="Identifier">--&gt;</span> eventStream : <span class="Comment">messages</span>
iotRule <span class="Identifier">--&gt;</span> errorQueue : <span class="Comment">Failed action message</span>
<span class="PreProc">@enduml</span>
</pre>
